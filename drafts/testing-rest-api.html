<!DOCTYPE html>
<html lang="en">
<head>
        <title>Writing functional tests for a REST API</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://coalkids.github.com/theme/css/main.css" type="text/css" />
        <link href="http://coalkids.github.com/" type="application/atom+xml" rel="alternate" title="Coalkids Blog ATOM Feed" />

   

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://coalkids.github.com/css/ie.css"/>
                <script src="http://coalkids.github.com/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://coalkids.github.com/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://coalkids.github.com">Coalkids Blog </a></h1>
                <nav><ul>
                                                                                                    <li ><a href="http://coalkids.github.com/category/agility.html">agility</a></li>
                                    <li ><a href="http://coalkids.github.com/category/flask.html">flask</a></li>
                                    <li ><a href="http://coalkids.github.com/category/misc.html">misc</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="testing-rest-api.html" rel="bookmark"
           title="Permalink to Writing functional tests for a REST API">Writing functional tests for a REST API</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2013-10-03T05:20:00">
                Jeu 03 octobre 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://coalkids.github.com/author/julien-seiler.html">Julien Seiler</a>
        </address>
        <p>In <a href="http://coalkids.github.com/category/python.html">Python</a>. </p>
<p>tags: <a href="http://coalkids.github.com/tag/rest.html">rest</a><a href="http://coalkids.github.com/tag/tdd.html">tdd</a></p></footer><!-- /.post-info -->      <p>I have been spending a lot of time these past years writing REST API for different software projects. Most of them are written in Python and based on the Flask micro-framework.
During this year I have been developing a simple strategy for writing functional tests for this type of code.</p>
<p>When you adopt test driven development, which is definitely the best approach you can have, your main concern is writing enough test to get confident about your future code. However, it is sometime hard to know if your test are covering all aspect of your application logic. It is even harder to write your test cases in a way that will make them easy to maintain and extend.</p>
<h2>Organize your code</h2>
<p>The first tip I would give to anyone starting unit or functional testing is to organize their test code properly.</p>
<p>Most of the languages provide structures and concepts that let developer organize their code in a hierarchical way. For instance, in Python you can make use of packages (folders of Python files), modules (single Python files) and classes.</p>
<p>First all, make sure to separate your tests suites from your API code. It should be easy to distribute or deploy your API in a light format without shipping all your tests. A simple tests folder at the same level of your main application folders is perfect. I would to recommend to never use Python docstring tests out of debugging as well.</p>
<p>Then, make sure to separate unit tests from functional tests. More than making things nice and clear, it gives you the opportunity to focus on only one aspect of your code. For instance, you can make sure all your unit tests are working before bothering about feature test cases.</p>
<p>When we talk about developing a REST API, we quickly come to thinking in terms of resources and actions. REST API are supposed to be stateless so you might focus on each single resources of the API without expecting tricky interaction between different resources. A suitable way to write functional tests for REST API is then to create a tests suite package for each resources and then one test suite for each action on this resource.</p>
<p>Translated in Python, I use to create one Python package for each resource (users, books, dogs, etc.) and one Python module for each action (get all, get one, create, update and delete).</p>
<p>TODO : files hierarchy screenshot</p>
<p>Through my experience on writing tests for REST API, I have notice that tests 
The way you test a REST API resource and action is very similar from one resource to another. Most of the time you want to check the following aspects :
<em> Authentication and authorization
</em> Data and parameters validation
* Expected results</p>
<p>Data and parameters validation can be split in more specifics cases :
<em> Data and parameters format
</em> Data and parameters presence
* Data and parameters existence</p>
<p>It is most of the time a good idea to split your test cases following these different aspects. It helps you keep your tests cases and fixtures small and consistent. I'm used to writing a Python class for each aspect of the action I want to test. Whatever the way you split your test cases, it is a good idea to keep the same code structure for all your functional tests.</p>
<h2>Adopt a clear and standard naming convention for your tests</h2>
<h2>Handle your fixtures</h2>
    </div><!-- /.entry-content -->
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://www.bulleval.fr">Bulleval</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            
                                                    <li><a href="http://github.com/coalkids">github</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37978271-2', 'coalkids.github.io');
  ga('send', 'pageview');

</script>

</body>
</html>